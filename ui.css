
:root{
  --bg:#f2f2f7; --card:rgba(255,255,255,.82); --cardSolid:#fff;
  --text:#0b0b0f; --muted:rgba(60,60,67,.72); --hairline:rgba(60,60,67,.16);
  --accent:#007aff; --shadow:0 18px 60px rgba(0,0,0,.10);
  --rLg:22px; --rMd:16px; --maxw:520px;
}
@media (prefers-color-scheme: dark){
  :root{
    --bg:#000; --card:rgba(28,28,30,.78); --cardSolid:#1c1c1e;
    --text:#f5f5f7; --muted:rgba(235,235,245,.6); --hairline:rgba(84,84,88,.65);
    --shadow:0 18px 60px rgba(0,0,0,.55);
  }
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; background:var(--bg); color:var(--text); direction:rtl;
  font-family: ui-sans-serif, system-ui, -apple-system, "SF Pro Display", "SF Pro Text",
    "IBM Plex Sans Arabic","Segoe UI",Arial;
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
}
a{color:inherit; text-decoration:none}
button,input,textarea{font:inherit}
img{max-width:100%; display:block}

.shell{min-height:100%; display:flex; justify-content:center;
  padding:max(14px, env(safe-area-inset-top)) 14px max(18px, env(safe-area-inset-bottom));
}
.app{width:min(100%, var(--maxw)); display:flex; flex-direction:column; gap:14px}

.nav{
  position:sticky; top:0; z-index:30; padding:10px 0 6px;
  backdrop-filter:blur(22px); -webkit-backdrop-filter:blur(22px);
  background:linear-gradient(to bottom, rgba(242,242,247,.92), rgba(242,242,247,.66), rgba(242,242,247,0));
}
@media (prefers-color-scheme: dark){
  .nav{background:linear-gradient(to bottom, rgba(0,0,0,.92), rgba(0,0,0,.66), rgba(0,0,0,0));}
}
.navbar{display:flex; align-items:center; justify-content:space-between; gap:12px}
.navbar .side{display:flex; align-items:center; gap:10px; min-width:120px}
.navTitle{flex:1; text-align:center; font-size:13px; font-weight:800; color:var(--muted); letter-spacing:.2px}
.largeTitle{margin:6px 0 0; font-size:34px; font-weight:950; line-height:1.12}
.subTitle{margin:6px 0 0; color:var(--muted); font-weight:750; font-size:14px}

.pill{
  display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:999px;
  border:1px solid var(--hairline); background:rgba(255,255,255,.55);
  font-size:12px; font-weight:900; backdrop-filter:blur(18px); -webkit-backdrop-filter:blur(18px);
}
@media (prefers-color-scheme: dark){ .pill{background:rgba(28,28,30,.55)} }

.iconBtn{
  border:1px solid var(--hairline); background:rgba(255,255,255,.55); color:var(--text);
  padding:10px 12px; border-radius:999px; display:inline-flex; align-items:center; gap:8px;
  cursor:pointer; user-select:none; backdrop-filter:blur(18px); -webkit-backdrop-filter:blur(18px);
}
@media (prefers-color-scheme: dark){ .iconBtn{background:rgba(28,28,30,.55)} }
.iconBtn:active{transform:translateY(1px)}
.iconBtn .k{font-size:12px; font-weight:900; color:var(--muted)}

.primaryBtn{
  width:100%; border:none; background:var(--accent); color:#fff; padding:14px 14px;
  border-radius:16px; font-weight:950; cursor:pointer;
}
.primaryBtn:active{transform:translateY(1px)}
.ghostBtn{
  width:100%; border:1px solid var(--hairline); background:rgba(255,255,255,.55); color:var(--text);
  padding:14px 14px; border-radius:16px; font-weight:950; cursor:pointer;
  backdrop-filter:blur(18px); -webkit-backdrop-filter:blur(18px);
}
@media (prefers-color-scheme: dark){ .ghostBtn{background:rgba(28,28,30,.55)} }
.ghostBtn:active{transform:translateY(1px)}

.card{
  background:var(--card); border:1px solid var(--hairline); border-radius:var(--rLg);
  box-shadow:var(--shadow); overflow:hidden; backdrop-filter:blur(22px); -webkit-backdrop-filter:blur(22px);
}
.cardInner{padding:16px}
.cardTitle{font-size:15px; font-weight:950; margin:0 0 10px}
.hairline{height:1px; background:var(--hairline); margin:12px 0}

.kpiGrid{display:grid; grid-template-columns:1fr 1fr; gap:12px}
.kpi{
  background:rgba(255,255,255,.55); border:1px solid var(--hairline); border-radius:18px; padding:12px;
  backdrop-filter:blur(18px); -webkit-backdrop-filter:blur(18px);
}
@media (prefers-color-scheme: dark){ .kpi{background:rgba(28,28,30,.55)} }
.kLabel{color:var(--muted); font-size:12px; font-weight:900}
.kValue{font-size:20px; font-weight:980; margin-top:6px}
.kValue.sm{font-size:18px}

.list{margin:0; padding:0; list-style:none}
.cell{
  display:flex; align-items:center; justify-content:space-between; gap:10px; padding:12px 0;
  border-bottom:1px solid var(--hairline);
}
.cell:last-child{border-bottom:none}
.label{color:var(--muted); font-weight:850; font-size:12px}
.value{font-weight:950; font-size:15px}
.value.small{font-size:13px; color:var(--muted); font-weight:900}
.chev{color:var(--muted); font-weight:950}

.progressWrap{display:flex; flex-direction:column; gap:10px}
.progressRow{display:flex; justify-content:space-between; align-items:baseline; gap:10px}
.pTitle{font-weight:980}
.pMeta{color:var(--muted); font-weight:900; font-size:12px}
.progress{
  height:12px; background:rgba(60,60,67,.10); border:1px solid var(--hairline);
  border-radius:999px; overflow:hidden;
}
.progress i{display:block; height:100%; width:0%; background:var(--text); border-radius:999px}

.callout{
  border:1px dashed rgba(60,60,67,.42); border-radius:18px; padding:14px; text-align:center;
  background:rgba(255,255,255,.38);
}
@media (prefers-color-scheme: dark){ .callout{background:rgba(28,28,30,.35)} }
.callout .note{color:var(--muted); font-weight:900; font-size:12px}
.callout .code{margin-top:10px; font-weight:980; font-size:18px; letter-spacing:.5px}

.segment{
  display:flex; gap:8px; padding:6px; border-radius:14px; border:1px solid var(--hairline);
  background:rgba(255,255,255,.55); backdrop-filter:blur(18px); -webkit-backdrop-filter:blur(18px);
}
@media (prefers-color-scheme: dark){ .segment{background:rgba(28,28,30,.55)} }
.segBtn{
  flex:1; border:none; background:transparent; border-radius:12px; padding:10px; font-weight:950;
  cursor:pointer; color:var(--muted);
}
.segBtn.active{background:var(--cardSolid); color:var(--text); box-shadow:0 10px 30px rgba(0,0,0,.08)}

.input,.textarea{
  width:100%; border:1px solid var(--hairline); background:rgba(255,255,255,.55); color:var(--text);
  border-radius:16px; padding:12px 14px; outline:none; font-weight:900;
  backdrop-filter:blur(18px); -webkit-backdrop-filter:blur(18px);
}
@media (prefers-color-scheme: dark){ .input,.textarea{background:rgba(28,28,30,.55)} }
.textarea{min-height:120px; resize:vertical}

.toast{
  position:fixed; left:14px; right:14px; bottom:max(14px, env(safe-area-inset-bottom)); z-index:50;
  display:flex; justify-content:center; pointer-events:none;
}
.toast .bubble{
  max-width:min(520px, 92vw); background:rgba(0,0,0,.78); color:#fff; padding:10px 14px;
  border-radius:999px; font-weight:950; font-size:13px; backdrop-filter:blur(18px); -webkit-backdrop-filter:blur(18px);
  opacity:0; transform:translateY(8px); transition:.22s ease;
}
.toast.show .bubble{opacity:1; transform:translateY(0)}

.hidden{display:none !important}
.skel{border-radius:14px; height:14px; background:rgba(60,60,67,.12); overflow:hidden; position:relative}
.skel:after{
  content:""; position:absolute; inset:0; transform:translateX(-60%);
  background:linear-gradient(90deg, transparent, rgba(255,255,255,.55), transparent);
  animation:shimmer 1.2s infinite;
}
@media (prefers-color-scheme: dark){
  .skel:after{background:linear-gradient(90deg, transparent, rgba(255,255,255,.10), transparent);}
}
@keyframes shimmer{0%{transform:translateX(-60%)}100%{transform:translateX(60%)}}
.smallNote{color:var(--muted); font-weight:850; font-size:12px; line-height:1.5}
